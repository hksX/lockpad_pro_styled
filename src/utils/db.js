import { openDB } from 'idb'; const DB='lockpad_styled_db', STORE='notes'; export async function initDB(){ return openDB(DB,1,{upgrade(db){ if(!db.objectStoreNames.contains(STORE)){ const s=db.createObjectStore(STORE,{keyPath:'id'}); s.createIndex('by_updated','updatedAt'); } } }); } export async function addNote(n){ const db=await initDB(); await db.put(STORE,n); } export async function bulkAddNotes(arr){ const db=await initDB(); const tx=db.transaction(STORE,'readwrite'); for(const a of arr) tx.store.put(a); await tx.done; } export async function clearAllNotes(){ const db=await initDB(); await db.clear(STORE); } export async function getAllNotes(){ const db=await initDB(); return db.getAll(STORE); } export async function updateNote(n){ const db=await initDB(); await db.put(STORE,n); } export async function deleteNote(id){ const db=await initDB(); await db.delete(STORE,id); }
